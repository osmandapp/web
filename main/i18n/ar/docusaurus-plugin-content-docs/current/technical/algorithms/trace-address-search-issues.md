---
source-hash: 4127321256305d47dce48682c4990b76cec1e4db868aa211746d1c49c5418eb3
sidebar_position: 3
---

# تتبع مشاكل البحث عن العناوين {#trace-address-search-issues}

## العثور على العنوان في المدينة الخطأ {#address-found-in-the-wrong-city}

في بعض الحالات، قد يُرجع البحث عن عنوان في OsmAnd نتائج لمدينة مختلفة عما هو متوقع. تنشأ هذه المشكلات بسبب كيفية تعريف حدود المدينة ومعالجتها في OpenStreetMap (OSM). إذا بحث المستخدم عن **اسم شارع** أو **شارع مع رقم منزل** دون تحديد مدينة، فقد تُرجع **خوارزمية البحث بالنص الكامل** تطابقًا من مدينة أخرى.

### المشكلات ذات الصلة {#related-issues}

تم الإبلاغ عن حالات تعيين مدينة غير صحيحة في مشكلات GitHub التالية:
[10679](https://github.com/osmandapp/OsmAnd/issues/10679)، [10677](https://github.com/osmandapp/OsmAnd/issues/10677)، [10699](https://github.com/osmandapp/OsmAnd/issues/10699)، [10921](https://github.com/osmandapp/OsmAnd/issues/10921).

## كيف يحدد OsmAnd حدود المدينة {#how-osmand-identifies-city-boundaries}

يحدد OsmAnd حدود المدينة باستخدام **علاقتها الإدارية** في OpenStreetMap. لكي يعتبر الحد صالحًا، يجب أن يفي بالمعايير التالية:

- يجب أن تتضمن **علاقة الحدود** العلامات:
  - **boundary** = *administrative* أو *postal_code*
  - **place** = *[city, town, village, hamlet, etc.]*

- يجب أن تحتوي علاقة الحدود على **عضو علاقة**:
  - **label**
  - **admin_centre** أو **admin_center**

- يجب أن يتطابق **اسم علاقة الحدود** تمامًا مع **اسم عقدة المكان**.

- إذا لم يتم استيفاء هذه الشروط، فلن يتم التعرف على علاقة الحدود كحد مدينة.

- من بين الحدود المتداخلة، يختار OsmAnd **الحد الأكبر**.

- تحدد **طرق العلاقة** الحدود. يدعم OsmAnd كل من الطرق **الداخلية** و**الخارجية**.

## مطابقة الاسم الدقيقة {#exact-name-matching}

لمعالجة العنوان بدقة، **يجب أن تتطابق أسماء الشوارع تمامًا**، بما في ذلك:

- الاختلافات في **علامات التشكيل** (على سبيل المثال، *Rue André Chenier* مقابل *Rue André Chénier*).
- الاختلافات في **البادئات والاختصارات**.

إذا حدث عدم تطابق، فقد تنشأ إحدى المشكلات التالية:

- يتم **تعيين المنزل لشارع خاطئ**.
- **يظهر نفس الشارع عدة مرات** في حدود مدينة مختلفة.

انظر مشكلة GitHub [10036](https://github.com/osmandapp/OsmAnd/issues/10036) للحصول على مثال.

## الأسباب المحتملة لتعيينات المدينة غير الصحيحة {#possible-causes-of-incorrect-city-assignments}

### مشكلات في OpenStreetMap {#issues-in-openstreetmap}

1. **حدود مدينة مكسورة أو مفقودة.**

   - إذا كانت حدود المدينة غير مكتملة أو غير صحيحة أو مفقودة، فقد تكون تعيينات العناوين غير موثوقة.
   - **الحل:** اتبع [دليل إصلاح حدود OSM](https://help.openstreetmap.org/questions/1053/how-do-i-fix-inconsistent-boundaries).
   - مثال: [10699](https://github.com/osmandapp/OsmAnd/issues/10699).

2. **حدود المدينة لا تتداخل بشكل صحيح.**

   - إذا كان الشارع ينتمي إلى مدينتين ولكنه تم رسمه بشكل غير صحيح، فقد لا يتعرف OsmAnd على التداخل.
   - **الحل:** اضبط حدود المدينة في OpenStreetMap لضمان أنها تشمل الشوارع المشتركة بشكل صحيح.

3. **علامات مفقودة مطلوبة في علاقة الحدود.**

   - إذا كانت العلاقة تفتقر إلى العلامات الأساسية مثل **boundary=administrative** أو **place=city**، فلن يتم استخدامها.
   - أمثلة:
     - المشكلة [10921](https://github.com/osmandapp/OsmAnd/issues/10921) (علامات مفقودة).
     - المشكلة [12548](https://github.com/osmandapp/OsmAnd/issues/12548) (مشكلة حدود *Erfstadt*).

### مشكلات في OsmAnd {#issues-in-osmand}

**عناوين معينة للمدن المجاورة.**

- قد **ترث المدن أو البلدات أو القرى أو الضواحي القريبة عناوين بشكل غير صحيح** بسبب تداخل الحدود أو الحدود المفقودة.
- هذا شائع عندما تنقسم المدن إلى مناطق إدارية ولكنها تفتقر إلى علاقات OSM محددة بوضوح.
- انظر التقارير ذات الصلة: [10559](https://github.com/osmandapp/OsmAnd/issues/10559)، [10679](https://github.com/osmandapp/OsmAnd/issues/10679)، [10730](https://github.com/osmandapp/OsmAnd/issues/10730).

## طرق التحقق {#verification-methods}

للتحقق من مشكلات حدود المدينة واستكشاف الأخطاء وإصلاحها، قارن النتائج من أدوات الخرائط المختلفة.

### استخدام OpenStreetMap {#using-openstreetmap}

**مثال:** العنوان الذي تم البحث عنه: *Wolności 223, Zabrze*

1. افتح OpenStreetMap (OSM).
2. ابحث عن **Zabrze** وحدد النتيجة المرتبطة بـ **حد إداري**.
3. اعرض حدود المدينة لتأكيد ما إذا كان العنوان معينًا بشكل صحيح.

### استخدام Nominatim {#using-nominatim}

**مثال:** العنوان الذي تم البحث عنه: *Wolności 223, Zabrze*

1. ابحث عن **الشارع ورقم المنزل** دون تحديد المدينة.
2. إذا وضعت نتيجة البحث العنوان في مدينة أخرى، فلاحظ اسم المدينة المقترح.
3. أدخل **اسم المدينة الذي تم العثور عليه** في Nominatim.
4. تحقق من قيمة **ترتيب العنوان**:
   - مثال: *Wolności, Maciejów*
   - إذا تم إدراج Maciejów كـ *ضاحية/قرية صغيرة (ترتيب 20)*، فهي تقسيم إداري أصغر لمدينة أخرى.

**هام:** كن حذرًا عند تحديد نتائج البحث، حيث قد توجد مدن بأسماء متشابهة في مناطق أو بلدان مختلفة.

## البحث عن عناوين الولايات المتحدة وبيانات TIGER {#us-address-search-and-tiger-data}

يستخدم OsmAnd بيانات OpenStreetMap للبحث عن العناوين، مع مصادر بيانات إضافية مثل **TIGER (نظام الترميز المرجعي الجغرافي المتكامل طبولوجيًا)** من مكتب الإحصاء الأمريكي. هذه المجموعة من البيانات تعتمد على النطاق ولا تحتوي على أرقام منازل دقيقة. قد تكون بعض العناوين مفقودة أو غير دقيقة.

حل المشكلات المتعلقة بعناوين الولايات المتحدة:

1. يتم **تقسيم العنوان المدخل إلى مكونات**: `[رقم المنزل] [اسم الشارع]`, `[المدينة]`, `[الولاية]`, `[الرمز البريدي]`

2. يقوم النظام **أولاً بالتحقق من OSM** بحثًا عن تطابق دقيق مع أرقام المنازل والشوارع.

3. إذا **لم يتم العثور على تطابق** في OSM، يبحث النظام في بيانات TIGER، والتي تتضمن:
    - أسماء الشوارع وتصنيفاتها.
    - نطاقات أرقام المنازل المستنبطة.
    - الحدود الإدارية.

4. إذا كان **رقم المنزل مفقودًا**، يقدر OsmAnd موقعه بناءً على البيانات القريبة.

5. **إرجاع النتائج**:
    - إذا كان العنوان موجودًا في OSM، يتم عرض تطابق دقيق.
    - إذا كانت بيانات TIGER فقط متاحة، يتم توفير نتيجة تقريبية.
    - إذا لم يحتوي أي من المصدرين على العنوان، يفشل البحث.

#### أنواع بيانات العنوان في TIGER {#types-of-address-data-in-tiger}

| نوع بيانات TIGER | الاستخدام في OsmAnd |
|---|---|
| **أسماء الشوارع** | تستخدم للبحث القائم على الاسم. |
| **نطاقات أرقام المنازل** | توفر مواقع عناوين تقريبية. |
| **الرموز البريدية** | تساعد في ربط العناوين بالمناطق البريدية الصحيحة. |
| **الحدود الإدارية** | تحدد مواقع المدن والولايات. |

<br/>

#### عندما يتم العثور على عنوان مقابل عدم العثور عليه {#when-an-address-is-found-vs-not-found}

| سيناريو البحث | النتيجة في OsmAnd |
|---|---|
| العنوان موجود في OSM برقم المنزل والشارع | ✅ تطابق دقيق |
| العنوان موجود في TIGER ولكنه يفتقر إلى أرقام المنازل | ⚠️ تطابق تقريبي باستخدام الاستنباط |
| العنوان موجود في TIGER ولكنه يحتوي على بيانات غير صحيحة | ⚠️ تطابق جزئي مع أخطاء |
| العنوان مفقود من كل من OSM و TIGER | ❌ لا توجد نتيجة |

#### قيود بيانات TIGER في OsmAnd {#limitations-of-tiger-data-in-osmand}

تؤثر عدة عوامل على دقة البحث عن العناوين في النظام القائم على TIGER:

- **أرقام المنازل المفقودة**. تعتمد العديد من العناوين في TIGER على **الاستنباط**، مما يؤدي إلى مواقع تقريبية.

- **أسماء الشوارع القديمة**. قد لا تعكس أسماء الطرق في TIGER اصطلاحات التسمية الحالية في OSM.

- **عدم تطابق الرمز البريدي**. قد تكون الحدود في TIGER غير صحيحة، مما يتسبب في تعيينات رمز بريدي غير صحيحة.